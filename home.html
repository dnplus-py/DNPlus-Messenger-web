<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNPlus - Home</title>
    <style>
        body { margin: 0; font-family: sans-serif; background-color: #0b141a; color: white; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* CABECERA SIN EL ICONO DE COMUNIDAD */
        .header { background-color: #085f56; padding: 10px 15px 0 15px; flex-shrink: 0; }
        .header-top { display: flex; justify-content: space-between; align-items: center; padding-bottom: 10px; }
        .header-top h1 { margin: 0; font-size: 22px; color: #e9edef; font-weight: 500; }
        
        .tabs { display: flex; text-align: center; font-weight: bold; font-size: 14px; color: #8696a0; }
        .tab { flex: 1; padding: 12px 0; cursor: pointer; border-bottom: 3px solid transparent; transition: 0.3s; }
        .tab.active { color: #00a884; border-bottom: 3px solid #00a884; }

        /* SECCIONES CON SCROLL SUAVE */
        .content-section { 
            flex: 1; 
            overflow-y: scroll; 
            -webkit-overflow-scrolling: touch; 
            display: none; 
            padding-bottom: 100px; /* Para que el bot√≥n no tape el √∫ltimo item */
        }
        .content-section.active { display: block; }

        /* ESTILO DE ITEMS (CHATS/ESTADOS) */
        .item { display: flex; align-items: center; padding: 15px; gap: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .avatar-circle { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; background: #2a3942; }
        .info { flex: 1; }
        .nombre { font-size: 16px; font-weight: bold; margin-bottom: 3px; }
        .subtext { font-size: 14px; color: #8696a0; }

        /* ESTADOS */
        .my-status { display: flex; align-items: center; padding: 15px; gap: 15px; position: relative; }
        .add-status-btn { position: absolute; bottom: 12px; left: 48px; background: #00a884; border: 2px solid #0b141a; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 15px; font-weight: bold; }

        /* BOTONES FLOTANTES */
        .fab { position: fixed; bottom: 20px; right: 20px; background: #00a884; width: 56px; height: 56px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 4px 10px rgba(0,0,0,0.5); z-index: 999; }
        .fab-text { bottom: 90px; right: 25px; background: #232d36; width: 45px; height: 45px; font-size: 20px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="header-top">
            <h1>DNPlus</h1>
            <div style="display: flex; gap: 20px; font-size: 18px;"><span>üîç</span><span>‚ãÆ</span></div>
        </div>
        <div class="tabs">
            <div class="tab active" onclick="switchTab('chats', this)">CHATS</div>
            <div class="tab" onclick="switchTab('estados', this)">ESTADOS</div>
            <div class="tab" onclick="switchTab('llamadas', this)">LLAMADAS</div>
        </div>
    </div>

    <div id="sec-chats" class="content-section active">
        <div id="lista-chats-fb"></div>
        <div class="fab" onclick="location.href='lista_contactos.html'">üí¨</div>
    </div>

    <div id="sec-estados" class="content-section">
        <div class="my-status">
            <div style="position: relative;">
                <img id="mi-foto-estado" class="avatar-circle" src="https://cdn-icons-png.flaticon.com/512/149/149071.png">
                <div class="add-status-btn">+</div>
            </div>
            <div class="info">
                <div class="nombre" id="mi-nombre-estado">Mi estado</div>
                <div class="subtext">Toca para a√±adir un estado</div>
            </div>
        </div>
        <div class="subtext" style="padding: 10px 15px; background: rgba(255,255,255,0.03);">Recientes</div>
        <div id="lista-estados-fb"></div>
        
        <div class="fab fab-text" onclick="crearEstadoTexto()">‚úèÔ∏è</div>
        <div class="fab" onclick="document.getElementById('file-status').click()">üì∑</div>
        <input type="file" id="file-status" hidden accept="image/*">
    </div>

    <div id="sec-llamadas" class="content-section">
        <div style="padding: 50px; text-align: center; color: #8696a0;">No hay llamadas recientes</div>
        <div class="fab" onclick="location.href='crear_new_contact.html'">üìû</div>
    </div>

<script>
    // Recuperar datos de registro para los Estados
    const miNombre = localStorage.getItem("user_name") || "Usuario";
    const miFoto = localStorage.getItem("user_photo") || "https://cdn-icons-png.flaticon.com/512/149/149071.png";

    // Aplicar a la interfaz de Estados
    document.getElementById('mi-nombre-estado').innerText = miNombre;
    document.getElementById('mi-foto-estado').src = miFoto;

    function switchTab(section, element) {
        // Quitar active de todos
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        
        // Activar el seleccionado
        element.classList.add('active');
        document.getElementById('sec-' + section).classList.add('active');
    }

    // El resto de tu l√≥gica de Firebase aqu√≠...
</script>
</body>
</html>
