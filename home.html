<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root { --header: #075e54; --fondo: #0b141a; --verde: #00a884; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--fondo); color: white; overflow: hidden; }
        
        /* CABECERA COMPACTA */
        .header { 
            background: var(--header); 
            padding: 5px 15px 0 15px; 
            height: 90px; 
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .top-bar { display: flex; justify-content: space-between; align-items: center; padding-top: 5px; }
        .logo { font-size: 20px; font-weight: bold; letter-spacing: 0.5px; }
        
        .icons { display: flex; gap: 20px; align-items: center; }
        .search-input { 
            display: none; background: transparent; border: none; border-bottom: 1px solid white; 
            color: white; outline: none; padding: 2px; width: 120px;
        }

        .tabs { display: flex; }
        .tab { 
            flex: 1; text-align: center; padding: 10px 0; 
            color: rgba(255,255,255,0.6); cursor: pointer; 
            font-weight: bold; font-size: 13px;
        }
        .tab.active { color: white; border-bottom: 3px solid white; }

        iframe { width: 100%; height: calc(100vh - 90px); border: none; }

        /* MODAL DE AJUSTES */
        #modal-ajustes {
            display: none; position: fixed; top: 45px; right: 10px;
            background: #232d36; border-radius: 8px; width: 180px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5); z-index: 5000;
        }
        .menu-item { padding: 12px 15px; cursor: pointer; font-size: 15px; }
        .menu-item:hover { background: #1c262d; }
        .menu-item.danger { color: #f25c5c; }
    </style>
</head>
<body>

    <div class="header">
        <div class="top-bar">
            <span class="logo">DNPlus</span>
            <div class="icons">
                <input type="text" id="buscador" class="search-input" placeholder="Buscar..." onkeyup="filtrarContenido()">
                <span id="btn-search" onclick="toggleSearch()" style="cursor:pointer; font-size: 18px;">üîç</span>
                <span onclick="toggleAjustes()" style="cursor:pointer; font-size: 20px; font-weight: bold;">‚ãÆ</span>
            </div>
        </div>
        <div class="tabs">
            <div class="tab active" onclick="ir('lista_chats.html', this)">CHATS</div>
            <div class="tab" onclick="ir('lista_estados.html', this)">ESTADOS</div>
            <div class="tab" onclick="ir('lista_llamadas.html', this)">LLAMADAS</div>
        </div>
    </div>

    <iframe id="ventana" src="lista_chats.html"></iframe>

    <div id="modal-ajustes">
        <div class="menu-item" onclick="location.href='editar_mi_perfil.html'">Perfil</div>
        <div class="menu-item" onclick="location.href='ajustes.html'">Configuraci√≥n</div>
        <div class="menu-item danger" onclick="confirmarBorrar()">Borrar historial</div>
    </div>

    <script>
        function ir(pagina, el) {
            document.getElementById('ventana').src = pagina;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            toggleAjustes(false); 
        }

        function toggleAjustes(show = null) {
            const m = document.getElementById('modal-ajustes');
            if (show === false) m.style.display = 'none';
            else m.style.display = (m.style.display === 'block') ? 'none' : 'block';
        }

        function toggleSearch() {
            const input = document.getElementById('buscador');
            input.style.display = (input.style.display === 'block') ? 'none' : 'block';
            if(input.style.display === 'block') input.focus();
        }

        function filtrarContenido() {
            const texto = document.getElementById('buscador').value.toLowerCase();
            const frame = document.getElementById('ventana').contentWindow;
            frame.postMessage({ type: 'filter', query: texto }, '*');
        }

        function confirmarBorrar() {
            if(confirm("¬øEst√°s seguro de que quieres borrar todos los chats de tu historial?")) {
                alert("Historial borrado (Simulaci√≥n)");
                toggleAjustes(false);
            }
        }

        window.onclick = function(event) {
            if (!event.target.matches('.icons span')) {
                toggleAjustes(false);
            }
        }
    </script>
</body>
</html>
